<!DOCTYPE html>
<html lang='en'>

    <head>
        <meta charset='UTF-8'>
        <meta name='viewport'
            content='width=device-width, initial-scale=1.0'>
        <meta http-equiv='X-UA-Compatible'
            content='ie=edge'>
        <title>MATLAB Webified</title>
        <style>
            body {
                width: 100vw;
                height: 100vh;
                padding: 0;
                margin: 0;
            }
            
            .card {
                width: 400px;
                padding: 10px;
                height: 300px;
                margin: auto;
                transform: translateY(calc((100vh - 300px) / 2));
                position: relative;
                perspective: 1000px;
            }
            
            .card__front,
            .card__back {
                border-radius: 2px;
                box-shadow: 0 2px 2px rgba(0, 0, 0, 0.5), 0 0 1px rgba(0, 0, 0, 0.5);
                width: inherit;
                height: inherit;
                padding: inherit;
                background-color: #fff;
                top: 0;
                left: 0;
                position: absolute;
                transition: transform 1s ease, visibility 1s ease;
                transform-origin: 50% 50%;
                backface-visibility: hidden;
            }
            
            .card__body {
                padding: 30px 0;
                text-align: center;
                font-size: 25px;
                height: 32%;
            }
            
            .card__back {
                visibility: hidden;
                transform: rotateY(180deg);
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 25px;
            }
            
            .card__adder {
                display: flex;
                justify-content: space-evenly;
                height: 30%;
            }
            
            .card__form-control {
                margin: 5px;
                z-index: 10;
                width: 40%;
            }
            
            .card__form-control__label {
                display: inline-block;
                font-weight: normal;
                margin: 10px;
                margin-left: 25px;
                width: 200px;
                vertical-align: top;
            }
            
            .card__ripple-input-field {
                display: inline-block;
                position: relative;
                width: 100%;
            }
            
            .card__ripple-input-field__input {
                border: none;
                border-bottom: 2px solid #e3e3e3;
                width: 100%;
                outline: none;
                padding: 5px 0;
                text-align: center;
                font-size: 20px;
            }
            
            .card__ripple-input-field__ripple-bar {
                width: 100%;
                height: 2px;
                position: absolute;
                left: 0;
                bottom: 0;
                transition: transform 500ms cubic-bezier(0.23, 1, 0.32, 1);
                transform: scaleX(0);
                background-color: #000;
                transform-origin: 50% 50%;
                display: inline-block;
            }
            
            .card__ripple-input-field__input:focus~.card__ripple-input-field__ripple-bar {
                transform: scaleX(1);
            }
            
            .card__adder__plus {
                display: inline-block;
                margin: 5px;
                font-size: 30px;
                width: 5%;
                transform: translateY(30%);
            }
            
            .card__footer {
                position: relative;
                bottom: 0;
                display: flex;
                justify-content: flex-end;
            }
            
            button {
                background-color: rgb(83, 49, 231);
                color: #fff;
                border-radius: 2px;
                box-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
                padding: 10px;
                border: none;
                outline: none;
                cursor: pointer;
            }
        </style>
    </head>

    <body>
        <div class='card'>
            <div class='card__front'>
                <form class='card__adder'>
                    <div class='card__form-control'>
                        <label class='card__form-control__label'></label>
                        <span class='card__ripple-input-field'>
                            <input class='card__ripple-input-field__input first-number' type='number' required/>
                            <span class='card__ripple-input-field__ripple-bar'></span>
                        </span>
                    </div>
                    <span class='card__adder__plus'>+</span>
                    <div class='card__form-control'>
                        <label class='card__form-control__label'></label>
                        <span class='card__ripple-input-field'>
                            <input class='card__ripple-input-field__input second-number' type='number'/>
                            <span class='card__ripple-input-field__ripple-bar'></span>
                        </span>
                    </div>
                </form>
                <div class='card__body'>

                </div>
                <div class='card__footer'>
                    <button type='button'>Add</button>
                </div>
            </div>
            <div class='card__back'>
                <div class='card__loader'>
                    Please wait...
                </div>
            </div>
        </div>
    </body>

    <script>
        const addButton = document.querySelector('button');
        const firstNumberInput = document.querySelector('.first-number');
        const secondNumberInput = document.querySelector('.second-number');
        const frontCard = document.querySelector('.card__front');
        const backCard = document.querySelector('.card__back');
        const cardBody = document.querySelector('.card__body');
        addButton.addEventListener('click', () => {
            frontCard.style.visibility = 'hidden';
            frontCard.style.transform = 'rotateY(180deg)';
            backCard.style.visibility = 'visible';
            backCard.style.transform = 'rotateY(360deg)';
            const firstNumber = +firstNumberInput.value || 0;
            const secondNumber = +secondNumberInput.value || 0;
            firstNumberInput.value = firstNumber;
            secondNumberInput.value = secondNumber;
            fetch(`/app/api/example/add?first=${firstNumber}&second=${secondNumber}`)
                .then(response => response.json())
                .then(data => cardBody.innerHTML = data.result)
                .catch(() => cardBody.innerHTML = 'An error occurred invoking MATLAB function. Please restart the server and reload this page')
                .finally(() => {
                    backCard.style.visibility = 'hidden';
                    backCard.style.transform = 'rotateY(180deg)';
                    frontCard.style.visibility = 'visible';
                    frontCard.style.transform = 'rotateY(0)';
                });
        }, false);
    </script>

</html>